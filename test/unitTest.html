<!DOCTYPE html>
<html>
<head>
    <title>UnitTest</title>
    <meta charset="UTF-8">
<head>
<body>

<h1>Test Heading</h1>

<p>Test paragraph. éêïèàù</p>

<script src="../JS/lib/linq.hack.min.js"></script>
<script src="testLib/jstest.min.js"></script>

<script>
"use strict";
/*$(document).ready(function () {
    $.get('test.json', function (r) {
        console.log(r.length);
        var time = new Date().getTime();
        var tabTemp1 = [];
        var tabTemp2 = [];
        var test = [];
        for(var i = 0; i < r.length ; i++) {

            if(r[i].isActive) {
                tabTemp1.push(r[i].picture);
            } else if (r[i].gender == 'male' && r[i].index > 10) {
                tabTemp2.push(r[i].picture);
            }
        }
        console.log(new Date().getTime() - time);
        time =  new Date().getTime();

        var tabt =  Enumerable.From(r).Where("$.isActive").ToArray();
        var tab2 = Enumerable.From(r).Where("$.gender == 'male' && $.index > 10").ToArray();

        console.log(new Date().getTime() - time);

        //console.log(tabTemp1);
        //console.log(tabTemp2);
    }, 'JSON');

*/
    var testObject = new JsTest();
    testObject.setTimer(1000);
    testObject.launchTest(
        {
            dataBase: function () {
                testObject.$.post('unitTest.php', {DATABASE:true}, function(r) {
                    console.log('%cTest DATABASE : CONNECT, CREATE, INSERT, SELECT, DROP', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            ziparchive: function () {
                testObject.$.post('unitTest.php', {ZIPARCHIVE:true}, function(r) {
                    console.log('%cTest File creation + zip file', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },

            emptypar: function () {
                testObject.$.post('../app.php', {}, function(r) {
                    console.log('%cTest API {}', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            nullpar: function () {
                testObject.$.post('../app.php/null/null/', {}, function(r) {
                    console.log('%cTest API {action:null, controller:null}', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            testpar: function () {
                testObject.$.post('../app.php/test/test/', {}, function(r) {
                    console.log('%cTest API {action:test, controller:test}', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            testparText: function () {
                testObject.$.post('../app.php/test/test/', {bibi: 'bibi'}, function(r) {
                    console.log('%cTest API {action:test, controller:test}', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            testparJsonp: function () {
                console.log('%cTest API jsonp test', 'color: GREEN');
                testObject.$.ajax({
                    url: '../app.php/test/test/',
                    data : {bibi: 'bibi'},
                    success: function(r) {
                        console.log(r);
                    },
                    error: function(error) {
                        console.log(error);
                    },
                    dataType: 'jsonp',
                    jsonp: "callback",
                    crossDomain: true
                });
            },
            jsonpar: function () {
                testObject.$.post('../app.php', JSON.stringify({}), function(r) {
                    console.log('%cTest API JSON.stringify({})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            ajaxtest: function () {
                testObject.$.post('../app.php/ajax/test/', JSON.stringify({}), function(r) {
                    console.log('%cTest API JSON.stringify({action:test, controller:Ajax})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },

            addCodeDisconnect: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : "test", filename: "test", description: "description", langage: "langage"
                }), function(r) {
                    console.log('%cTest API /code/createfile/', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            disconnect: function () {
                testObject.$.post('../app.php/ajax/disconnect/', JSON.stringify({}), function(r) {
                    console.log('%cTest API JSON.stringify({action:DISCONNECT, controller:Ajax})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            csrf: function () {
                testObject.$.post('../app.php/csrf/', JSON.stringify({}), function(r) {
                    console.log('%cTest API /csrf/', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            csrfSet: function () {
                testObject.$.post('../app.php/csrf/set/', JSON.stringify({}), function(r) {
                    console.log('%cTest API /csrf/set/', 'color: GREEN');
                    window.csrf = r;
                    console.log(r);
                }, 'text');
            },
            //register
            registerWrong1: function() {
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test", login: "test"
                }), function(r) {
                    console.log('%cTest API /ajax/register/ wrong email', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            registerWrong2: function() {
                //window.csrf = "bibi";
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test", login: "test",  csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /ajax/register/ wrong email', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            registerWrong3: function() {
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test@hotmail.com",  csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /ajax/register/ wrong email', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            registerWrong4: function() {
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test@hotmail.com", login: "lili", password: "test", csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /ajax/register/ wrong  pwd too short', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            registerGood: function() {
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test@hotmail.com", login: "lili", password: "testtest",  csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /ajax/register/ good', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            registerGoodSameEmail: function() {
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test@hotmail.com", login: "lulu", password: "testtest",  csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /ajax/register/ good same email', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            registerGoodSamelogin: function() {
                testObject.$.post('../app.php/ajax/register/', JSON.stringify({
                    email : "test2@test.com", login: "lili", password: "testtest",  csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /ajax/register/ good same login', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },

            addCodeNewAccount: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : ["test"], filename: 'name', description: 'lolo new account', langage: ['JavaScript'], csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/createfile/ good account no valid', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            disconnectRegister: function () {
                testObject.$.post('../app.php/ajax/disconnect/', JSON.stringify({csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({action:DISCONNECT, controller:Ajax})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            //update code
            updateCodeWrong1: function() {
                testObject.$.post('../app.php/code/updatecode/', JSON.stringify({
                    codes: [{
                        'content': 'test',
                        'langage': 'php',
                        'time': 1489322612
                    }], id: 'c02fa364fc778ce7121145f180b0ed19', name: 'test sans login', csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/updatecode/ Good sans login', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            //login
            loginwocsrf: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : "test", password: "a", type: "login"}), function(r) {
                    console.log('%cTest API JSON.stringify({login : test, password: "a"})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            logintrue: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : true, password: "a", type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : true, password: "a", csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            loginfalse: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : false, password: "a", type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : false, password: "a", csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            loginnull: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : null, password: "a", type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : null, password: "a", csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            addCodeGoodDisconnect: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : ["test"], filename: ['name'], description: ['lolo not login'], langage: ['JavaScript'], csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/createfile/ Good csrf, not log in', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            passwordtrue: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : "a", password: true, type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : "a", password: true, csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            passwordfalse: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : "a", password: false, type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : "a", password: false, csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            passwordnull: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : "a", password: null, type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : "a", password: null, csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            gethome: function () {
                testObject.$.post('../app.php/code/getcodes/', JSON.stringify({csrf: window.csrf}), function(r) {
                    console.log('%cTest API code/getcodes/', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            checkuser: function () {
                testObject.$.post('../app.php/ajax/checkuser/', JSON.stringify({csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },

            goodlogin: function () {
                testObject.$.post('../app.php/ajax/login/', JSON.stringify({login : "setni", password: "azer", type: "login", csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({login : "setni", password: "azer", csrf})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            gethome: function () {
                testObject.$.post('../app.php/code/getcodes/', JSON.stringify({csrf: window.csrf}), function(r) {
                    console.log('%cTest API code/getcodes/ csrf', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            recheckuser: function () {
                testObject.$.post('../app.php/ajax/checkuser/', JSON.stringify({csrf: window.csrf}), function(r) {
                    console.log('%cTest API ajax/checkuser/ csrf', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            addCodeWrong1: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : "test", filename: "test", description: "description", langage: "langage", csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/createfile/ Wrong1 lang & content not array', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            addCodeWrong2: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : "test", filename: ['name'], description: ['lolo'], langage: "", csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/createfile/ Wrong2', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            addCodeWrong3: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : ["test"], filename: ['name'], description: ['lolo wrong'], langage: ['JavaScript', 'php'], csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/createfile/ Wrong3', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            addCodeGood: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : ["test"], filename: 'name', description: 'lolo good', langage: ['JavaScript'], csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/createfile/ Good csrf', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            addCodeGoodwoCsrf: function() {
                testObject.$.post('../app.php/code/createfile/', JSON.stringify({
                    file : ["test"], filename: ['name'], description: ['lolo'], langage: ['JavaScript']
                }), function(r) {
                    console.log('%cTest API /code/createfile/ Good', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },

            //update code
            updateCodeWrong2: function() {
                testObject.$.post('../app.php/code/updatecode/', JSON.stringify({
                    codes: [{
                        'content': 'test',
                        'langage': 'php',
                        'time': 1489322612
                    }], id: 'c02fa364fc778ce7121145f180b0ed19', name: ['test'], csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/updatecode/ wrong array in name', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            updateCodeWrong3: function() {
                testObject.$.post('../app.php/code/updatecode/', JSON.stringify({
                    codes: [{
                        'content': 'test',
                        'langage': 'php',
                        'time': 1489322612
                    }], id: 'c02fa364fc778ce7121145f180b0ed19', csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/updatecode/ wrong miss name param', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            updateCodeGood1: function() {
                testObject.$.post('../app.php/code/updatecode/', JSON.stringify({
                    codes: [{
                        'content': 'test1',
                        'langage': 'php',
                        'time': 1489322612
                    }], id: 'c02fa364fc778ce7121145f180b0ed19', name: 'test', csrf: window.csrf
                }), function(r) {
                    console.log('%cTest API /code/updatecode/ Good csrf', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            updateCodeGood2: function() {
                testObject.$.post('../app.php/code/updatecode/', JSON.stringify({
                    codes: [{
                        'content': 'test2',
                        'langage': 'php',
                        'time': 1489322612
                    }], id: 'c02fa364fc778ce7121145f180b0ed19', name: 'test'
                }), function(r) {
                    console.log('%cTest API /code/updatecode/ Good', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
            disconnect2: function () {
                testObject.$.post('../app.php/ajax/disconnect/', JSON.stringify({csrf: window.csrf}), function(r) {
                    console.log('%cTest API JSON.stringify({action:DISCONNECT, controller:Ajax})', 'color: GREEN');
                    console.log(r);
                }, 'text');
            },
        }
    );
//});

</script>
</body>
</html>
